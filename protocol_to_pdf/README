README
modENCODE to ENCODE3 Download Wiki as Documents
Last updated July 26 2013

Contents:
  OVERVIEW
  INTERPRETATION OF OUTPUT
  INCLUDED SCRIPTS
  INSTALLATION & DEPENDENCIES
  USAGE


OVERVIEW
  The ENCODE3 system makes use of "documents": Free-text files describing 
  experimental protocols, etc. The ModENCODE system, on the other hand, uses
  a MediaWiki site to store information about the protocols. Therefore, it
  makes sense to translate the pages on the wiki into individual files for
  export for the ENCODE3 system.

  To determine which wiki pages are relevant to a particular ModENCODE
  submission, the ModENCODE submission Chado database can be searched for
  links to wiki pages.

  These scripts search the ModENCODE database for references to the ModENCODE
  wiki, and export the found pages into individual PDFs which can be linked
  back to the referring ModENCODE submission.

INTERPRETATION OF OUTPUT
  TODO    

INCLUDED SCRIPTS

  get-wiki-dbinfo.pl is a modENCODE-specific script. Provided a list of 
    modEncode submission IDs, it will search the database for wikipages
    associated with those IDs and return a tab-separated file with the
    correlations between submission and wiki "oldid".

  fetch_pdf.rb is a more general script. Provided a list of wiki "oldids",
    which represent specific versions of the pages on the wiki, it will fetch
    these versioned pages and store them as a pdf file named <oldid>.pdf where
    <oldid> is the oldid of the page fetched.

INSTALLATION & DEPENDENCIES
  Installation:
    If all dependencies are installed, these scripts can be run "out of the
    box" once the configuration file is edited. If you are missing wget, 
    you can install it on Debian-based Linux:
      sudo apt-get install wget
    If you're missing wkhtmltopdf (likely), you can download it from the link
    below, in Dependencies.

  Configuration files:
    get-wiki-dbinfo.pl:
      See SAMPLE-get-wiki-dbinfo.yml for example configuration. You will need 
       TODO
    fetch_pdf.rb : see SAMPLE.fetch_pdf.conf for example configuration.
      TODO

  Dependencies:
    Tested on: 
      perl 5.10.0
      ruby 1.8.7

    get-wiki-dbinfo.pl requires the following perl modules:
      DBI
      LWP::Simple
      YAML
      URI::Escape
      List::MoreUtils

    fetch_pdf.rb :
      Requires wget.
      Requires wkhtmltopdf, available at 
        http://code.google.com/p/wkhtmltopdf/downloads/list
   
    This was most recently succesful on 64-bit Debian with wkhtmltopdf version:
    wkhtmltopdf-0.11.0_rc1-static-amd64.tar.bz2

    Note: The wkhtmltopdf package is in bzip2 format. To unzip on linux,
      tar jxvf wkhtmltopdf-0.11.0_rc1-static-i386.tar.bz2
    If you don't have bzip2 (like I didn't), you can get it on linux with
      sudo apt-get install bzip2

USAGE

  To get wikipages that are mentioned in each ModENCODE submission: TODO
  To download a selection of pages from the wiki
  TODO

